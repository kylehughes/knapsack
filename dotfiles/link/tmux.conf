################################################################################
# PREFIX
################################################################################

# Change the default prefix key to C-a
set -g prefix C-a

# Allow sending the prefix key to nested tmux sessions or other programs
bind-key a send-prefix

################################################################################
# GENERAL OPTIONS
################################################################################

# Set the default shell
set-option -g default-command "zsh"

# Enable better color support
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Increase scrollback buffer
set-option -g history-limit 10000

# Enable mouse support
set-option -g mouse on

# Better key handling
setw -g xterm-keys on

# Start window/pane indices at 1 (more natural for keyboard)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Faster key repetition
set -sg escape-time 0

# Focus events enabled for terminals that support them
set -g focus-events on

# Disable activity alerts
set -g visual-activity off
set -g visual-bell off
set -g visual-silence off
setw -g monitor-activity off
set -g bell-action none

################################################################################
# COPY MODE
################################################################################

# Use vi-style key bindings in copy mode
setw -g mode-keys vi

# Better copy mode bindings
bind-key -T copy-mode-vi v send -X begin-selection
bind-key -T copy-mode-vi y send -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode-vi Enter send -X copy-pipe-and-cancel "pbcopy"

################################################################################
# THEME - Gengar Dark Mode
################################################################################

# Pane borders - ghostly purple
set -g pane-border-style 'fg=#4a3a5a'
set -g pane-active-border-style 'fg=#9d7cd8'

# Status bar position
set -g status-position bottom
set -g status-justify left

# Status bar colors - deep purple background with lighter purple text
set -g status-style 'bg=#1a1523 fg=#c9b1e0'

# Left side of status bar - Gengar purple gradient
set -g status-left '#[fg=#1a1523,bg=#9d7cd8,bold] #S #[fg=#9d7cd8,bg=#1a1523]'
set -g status-left-length 20

# Right side of status bar - purple gradient
set -g status-right '#[fg=#4a3a5a,bg=#1a1523]#[fg=#c9b1e0,bg=#4a3a5a] %Y-%m-%d #[fg=#9d7cd8,bg=#4a3a5a]#[fg=#1a1523,bg=#9d7cd8,bold] %H:%M '
set -g status-right-length 50

# Window status - active window in bright Gengar purple
setw -g window-status-current-style 'fg=#1a1523 bg=#9d7cd8 bold'
setw -g window-status-current-format '#[fg=#1a1523,bg=#9d7cd8]#[fg=#1a1523,bg=#9d7cd8] #I  #W #[fg=#9d7cd8,bg=#1a1523]'

# Inactive windows - muted purple
setw -g window-status-style 'fg=#7a6a8a bg=#1a1523'
setw -g window-status-format ' #I  #W '

# Bell/alert style - Gengar's red eyes
setw -g window-status-bell-style 'fg=#ff4b4b bg=#1a1523 bold'

# Message style - purple pop-up
set -g message-style 'fg=#1a1523 bg=#9d7cd8 bold'

# Copy mode colors - inverted purple
setw -g mode-style 'fg=#1a1523 bg=#9d7cd8'

# Clock mode - Gengar purple
setw -g clock-mode-colour '#9d7cd8'

################################################################################
# KEY BINDINGS
################################################################################

# Unbind default keys
unbind j
unbind C-b
unbind '"'
unbind %

# Reload config
bind-key r source-file ~/.tmux.conf \; display "Config reloaded!"

# Window splitting
bind-key - split-window -v
bind-key \\ split-window -h

# Window navigation
bind-key C-h previous-window
bind-key C-l next-window
bind-key C-a last-window

# Window renaming
bind-key A command-prompt "rename-window %%"

# Pane navigation (vim-style)
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

################################################################################
# LAYOUTS
################################################################################

bind-key o select-layout "active-only"
bind-key M-- select-layout "even-vertical"
bind-key M-| select-layout "even-horizontal"
bind-key M-r rotate-window

################################################################################
# WINDOW SIZING
################################################################################

# Prevent smaller clients from constraining the window size
setw -g aggressive-resize on

# Allow resizing panes with mouse
set -g mouse-resize-pane on